<ion-header>
  <ion-navbar>
    <ion-title>
      <h1>Survey Statistics</h1>
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <button ion-button (click)="toResult()">See Results</button>
  <form *ngIf="survey" (submit)="doSubmit($event)" [formGroup]="survey">
    <button ion-button type="submit">Submit</button>
    <ion-list no-lines>
    <div formArrayName="items">
      <ion-item *ngFor="let question of questions | async ; let i = index;"
      padding-bottom
      >
        <div [formGroupName]="i">
        <!-- (click)="showOptions(question.id, question.title)" -->
        
        <ion-list-header *ngIf="!!question.header">
        <h2>{{question.header}}</h2>
        <hr>
        </ion-list-header>

        <p></p>
        <h4>{{question.id}}. {{question.title}}</h4>

        <rating *ngIf="question.type == 'radio'" formControlName="rating" readOnly="false" max="5"
        emptyStarIconName="star-outline" halfStarIconName="star-half" starIconName="star"
        nullable="false" (ngModelChange)="onStarChange($event)"> </rating>


        
        <ion-item *ngIf="question.type == 'text'">
        <ion-input type="text" formControlName="answer"></ion-input>
        </ion-item>

        <ion-item hidden>
            <ion-input readonly value="{{question.id}}" formControlName="id"></ion-input>
          </ion-item>
          <ion-item hidden>
            <ion-input readonly value="{{question.title}}" formControlName="title"></ion-input>
          </ion-item>
      </div>
      </ion-item>
    </div>
    </ion-list>
    
  </form>
</ion-content>
